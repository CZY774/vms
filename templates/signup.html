<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.webix.com/edge/webix.css" type="text/css">
    <script src="https://cdn.webix.com/edge/webix.js" type="text/javascript"></script>
    <style>
        body {
            background-color: #f7f7f7;
        }
    </style>
</head>
<body>
    <script>
        webix.ui({
            view: "form",
            id: "signupForm",
            container: document.body,
            width: 400,
            elements: [
                { view: "text", label: "Username", name: "username", required: true },
                { view: "text", label: "Email", name: "email", required: true },
                { view: "text", label: "Password", name: "password", type: "password", required: true },
                { view: "text", label: "Confirm Password", name: "confirm_password", type: "password", required: true },
                { margin: 10, cols: [
                    { 
                        view: "button", 
                        value: "Signup", 
                        click: function() {
                            const values = $$("signupForm").getValues();
                            webix.ajax().post("/signup", values, function(text, data) {
                                const response = data.json();
                                if (response.success) {
                                    webix.message("Account created successfully!");
                                    window.location.href = "/login";
                                } else {
                                    webix.message({ type: "error", text: response.message });
                                }
                            });
                        } 
                    },
                    { view: "button", value: "Cancel", click: function() { window.location.href = "/login"; } }
                ]}
            ],
            rules: {
                "username": webix.rules.isNotEmpty,
                "email": webix.rules.isEmail,
                "password": webix.rules.isNotEmpty,
                "confirm_password": function(value) {
                    return value === $$("signupForm").getValues().password;
                }
            }
        });
    </script>
</body>
</html>
